<!-- Content Wrapper. Contains page content -->
<app-navbar></app-navbar>
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h4 class="m-0 text-dark" style="font-family:sans-serif;">Dashboard</h4>
                </div>
                <hr>
                <!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <button class="btn btn-info rounded-0">Add Record</button>
                    </ol>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container-fluid -->
        <hr/>
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">

            <!-- /.row -->

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">List of Companies</h3>

                            <div class="card-tools">
                                <button type="button" class="btn btn-info rounded-0" (click)="openModal(template)">Add Company</button>
                            </div>
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body table-responsive p-0">
                            <table class="table table-hover text-nowrap">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>License No</th>
                                        <th>Contact no</th>
                                        <th>Address</th>
                                        <th>Email</th>

                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let comp of companyInfo">
                                        <td>{{comp.name}}</td>
                                        <td>{{comp.license_no}}</td>
                                        <td>{{comp.contact_no}}</td>
                                        <td>{{comp.address}}</td>
                                        <td>{{comp.email}}</td>
                                        <td>
                                            <a class="btn btn-success rounded-0 btn-sm" [routerLink]="['/company', comp.id]" routerLinkActive="router-link-active"><i class="fa fa-list" aria-hidden="true"></i></a>

                                        </td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                </div>
            </div>
            <!-- /.row -->

            <!-- Main row -->

            <!-- /.row -->
        </div>
        <!--/. container-fluid -->
    </section>
    <!-- /.content -->

    <!-- Add Company -->
    <ng-template #template>
        <div class="modal-header">
            <h4 class="modal-title pull-left">Add company</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form [formGroup]="formModel" autocomplete="off" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <input formControlName="name" class="form-control" placeholder="Enter Name">
                    <div *ngIf="f.name.touched && f.name.invalid" class="alert alert-danger">
                        <div *ngIf="f.name.errors.required">name is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <input formControlName="license_no" class="form-control" placeholder="License Number">
                    <div *ngIf="f.license_no.touched && f.license_no.invalid" class="alert alert-danger">
                        <div *ngIf="f.license_no.errors.required">license_no is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <input formControlName="contact_no" class="form-control" type="number" placeholder="Phone number">
                    <div *ngIf="f.contact_no.touched && f.contact_no.invalid" class="alert alert-danger">
                        <div *ngIf="f.contact_no.errors.required">contact_no is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <input formControlName="address" class="form-control" placeholder="Address">
                    <div *ngIf="f.address.touched && f.address.invalid" class="alert alert-danger">
                        <div *ngIf="f.address.errors.required">Address is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <input formControlName="email" class="form-control" placeholder="Email address">
                    <div *ngIf="f.email.touched && f.email.invalid" class="alert alert-danger">
                        <div *ngIf="f.email.errors.required">Email address is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <select class="form-control" formControlName="bank_id">
                        <option value="" selected>--selectbank--</option>
                        <option value="{{info.bank_id.id}}" *ngFor="let info of companyInfo">{{info.bank_id.bank_name}}</option>
                        <div *ngIf="f.bank_id.touched && f.bank_id.invalid" class="alert alert-danger">
                            <span *ngIf="f.bank_id.errors.required">Name is required.</span>
                        </div>
                        <span></span>
                    </select>
                </div>
                <div class="form-group">
                    <textarea class="form-control" formControlName="description" rows="3" placeholder="Description"></textarea>
                    <div *ngIf="f.description.touched && f.description.invalid" class="alert alert-danger">
                        <div *ngIf="f.description.errors.required">Description required.</div>
                    </div>
                </div>
                <div>
                    <button class="btn btn-primary rounded-0" style="float:right;" [disabled]="!formModel.valid">Submit</button>
                </div>

            </form>
        </div>
    </ng-template>
    <!-- end  -->
</div>
<!-- /.content-wrapper -->